(function(a){a.fn.extend({ajaxSubmit:function(b,c){var d={url:"",method:"post",type:"json",submit_button:"",ajax_loader:"",onSubmit:"",onComplete:"",onOK:"",onNotOK:""};b=a.extend(d,b);return this.each(function(){var d=new a.ajaxSubmit(this,b,c)})}});a.ajaxSubmit=function(b,c,d){var e=this;var f=a(b);var g=f.attr("id");var h=c.method.toUpperCase();var i=f.serialize();this.handleResponse=function(b){var d="";if(c.type=="xml"){d=a(b).find("status").text()}else if(c.type=="json"){d=b.status}else if(c.type=="text"){d=b}if(d.toUpperCase()=="OK"){if(c.onOK&&typeof c.onOK=="function"){c.onOK(b)}}else{if(c.onNotOK&&typeof c.onNotOK=="function"){c.onNotOK(b)}}};this.requestComplete=function(){if(c.submit_button&&typeof c.submit_button=="object"){c.submit_button.removeAttr("disabled")}if(c.ajax_loader&&typeof c.ajax_loader=="object"){c.ajax_loader.removeClass("ajaxsubmit-loader")}if(c.onComplete&&typeof c.onComplete=="function"){c.onComplete()}};if(c.url.length>0){if(c.submit_button&&typeof c.submit_button=="object"){c.submit_button.attr("disabled","disabled")}if(c.ajax_loader&&typeof c.ajax_loader=="object"){c.ajax_loader.addClass("ajaxsubmit-loader").show()}if(c.onSubmit&&typeof c.onSubmit=="function"){c.onSubmit()}a.ajax({url:c.url,type:c.method,data:i,dataType:c.type,complete:e.requestComplete,success:e.handleResponse})}}})(jQuery)